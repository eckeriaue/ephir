import{A as E}from"./ApplicationLogo-mIJgV4xK.js";import{d as N,s as F,j as b,u as n,r,o as p,c as h,b as l,a as e,w as t,f as i,v as I,T as S,k as x,g as M,x as L,F as j,p as P,e as H,l as O,n as C,i as k,t as q}from"./app-KjvYy6Fx.js";const A={class:"mt-2"},D={class:"mb-1"},K=N({__name:"MarkdownEditor",props:{modelValue:{default:""},modelModifiers:{}},emits:["update:modelValue"],setup(V){const[u]=F(V,"modelValue"),a=b(),s={href:b(""),mask:b(""),isVisible:b(!1),insert(){const d=n(this.mask)||n(this.href),o=n(this.href);this.mask.value="",this.href.value="",this.isVisible.value=!1,a.value.appendChild(Object.assign(document.createElement("a"),{classList:"editor-link",textContent:d,target:"_blank",href:o})),u.value=n(a).innerHTML,m()}};function m(){a.value.appendChild(document.createTextNode(" "))}return(d,o)=>{const f=r("kit-button"),v=r("kit-dropdown-trigger"),y=r("kit-input"),w=r("kit-command"),c=r("kit-dropdown-content"),$=r("kit-dropdown-menu");return p(),h("div",A,[l("div",D,[e($,{open:s.isVisible.value,"onUpdate:open":o[3]||(o[3]=_=>s.isVisible.value=_)},{default:t(()=>[e(v,{"as-child":""},{default:t(()=>[e(f,{type:"button",variant:"outline"},{default:t(()=>[i("🔗")]),_:1})]),_:1}),e(c,null,{default:t(()=>[e(w,{as:"fieldset",onKeypress:o[2]||(o[2]=I(_=>s.insert(),["enter"])),class:"space-y-1 p-1"},{default:t(()=>[e(y,{placeholder:"Текст",modelValue:s.mask.value,"onUpdate:modelValue":o[0]||(o[0]=_=>s.mask.value=_)},null,8,["modelValue"]),e(y,{required:"",placeholder:"https://example.com",modelValue:s.href.value,"onUpdate:modelValue":o[1]||(o[1]=_=>s.href.value=_)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["open"])]),l("div",{class:"min-h-20 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",id:"postContent",ref_key:"content",ref:a,onInput:o[4]||(o[4]=_=>u.value=_.target.innerHTML),contenteditable:"plaintext-only"},null,544)])}}}),R={class:"mt-4 max-w-full"},G={key:0,class:"w-full mt-6"},J={class:"grid grid-cols-4 gap-4 min-h-40"},Q={class:"gap-x-2 flex justify-end mt-4"},B=N({__name:"CreatePostModal",setup(V){const u=b(!1),a=S({title:"",content:"",photos:[]}),s=b([]);function m(d){const o=d.target;o&&o instanceof HTMLInputElement&&o.files&&0 in o.files&&(a.photos.push(o.files[0]),s.value.push(URL.createObjectURL(o.files[0])))}return(d,o)=>{var U;const f=r("kit-button"),v=r("kit-dialog-trigger"),y=r("kit-dialog-title"),w=r("kit-dialog-description"),c=r("kit-label"),$=r("kit-input"),_=r("kit-dialog-content"),T=r("kit-dialog");return(U=d.$page.props.auth)!=null&&U.user?(p(),x(T,{key:0,open:u.value,"onUpdate:open":o[4]||(o[4]=g=>u.value=g)},{default:t(()=>[e(v,{"as-child":""},{default:t(()=>[L(d.$slots,"default",{},()=>[e(f,null,{default:t(()=>[i(" 🪶 ")]),_:1})])]),_:3}),e(_,{class:"overflow-y-scroll max-h-[calc(100dvh_-_64px)]"},{default:t(()=>[e(y,null,{default:t(()=>[i(" Создать пост ")]),_:1}),e(w,null,{default:t(()=>[i("Здесь вы можете написать о чем вы думаете ")]),_:1}),l("form",{class:"min-w-fit",onSubmit:o[3]||(o[3]=H(g=>(n(a).post(d.route("posts.create"),{onSuccess(){n(a).reset("content"),n(a).reset("photos"),n(a).reset("title")}}),u.value=!1),["prevent"]))},[e(c,{for:"postName"},{default:t(()=>[i(" Название ")]),_:1}),e($,{modelValue:n(a).title,"onUpdate:modelValue":o[0]||(o[0]=g=>n(a).title=g),id:"postName",class:"mt-2"},null,8,["modelValue"]),l("div",R,[e(c,{for:"postContent"},{default:t(()=>[i(" Содержимое ")]),_:1}),e(K,{modelValue:n(a).content,"onUpdate:modelValue":o[1]||(o[1]=g=>n(a).content=g)},null,8,["modelValue"]),e(c,{for:"picture",class:"mt-2 inline-block"},{default:t(()=>[i(" Добавить фото ")]),_:1}),e($,{id:"picture",onChange:m,type:"file"}),s.value.length>0?(p(),h("div",G,[l("div",J,[(p(!0),h(j,null,P(s.value,(g,z)=>(p(),h("div",{key:g+z,style:O({backgroundImage:`url('${g}')`}),class:"bg-cover w-full rounded aspect-square"},null,4))),128))])])):M("",!0)]),l("div",Q,[e(f,{type:"button",onClick:o[2]||(o[2]=g=>(u.value=!1,n(a).title="",n(a).content="")),variant:"secondary"},{default:t(()=>[i("Отменить")]),_:1}),e(f,{type:"submit",disabled:n(a).title.length<1||n(a).content.length<1||n(a).processing},{default:t(()=>[i("Сохранить")]),_:1},8,["disabled"])])],32)]),_:1})]),_:3},8,["open"])):M("",!0)}}}),W={class:"min-h-screen bg-gray-100"},X={class:"bg-white border-b border-gray-100 sticky z-10 top-0"},Y={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Z={class:"flex justify-between h-16"},ee={class:"flex"},te={class:"flex items-center gap-x-4"},oe=l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-4 group-hover:rotate-180 transition-transform duration-300"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})],-1),se=l("div",{class:"hidden space-x-8 sm:-my-px sm:ms-10 sm:flex"},null,-1),ne={class:"hidden sm:flex sm:items-center sm:ms-6"},le={class:"ms-3 relative"},ae={class:"-me-2 flex items-center sm:hidden"},ie={class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},re=l("div",{class:"pt-2 pb-3 space-y-1"},null,-1),de={class:"pt-4 pb-1 border-t border-gray-200"},ue={key:0,class:"bg-white sticky inset-0 shadow"},pe={class:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},fe=N({__name:"Layout",setup(V){const u=b(!1),a=S({});return(s,m)=>{const d=r("kit-button"),o=r("kit-dropdown-trigger"),f=r("kit-dropdown-menu-item"),v=r("kit-command"),y=r("kit-dropdown-content"),w=r("kit-dropdown-menu");return p(),h("div",null,[l("div",W,[l("nav",X,[l("div",Y,[l("div",Z,[l("div",ee,[l("div",te,[e(n(k),{href:s.route("posts")},{default:t(()=>[e(E,{class:"block h-9 w-auto fill-current text-gray-800"})]),_:1},8,["href"]),e(d,{as:n(k),href:s.route("posts"),variant:"secondary",class:"size-6 px-0 group"},{default:t(()=>[oe]),_:1},8,["as","href"])]),se]),l("div",ne,[l("div",le,[e(B),e(w,null,{default:t(()=>[e(o,null,{default:t(()=>[s.$page.props.auth.user?(p(),x(d,{key:0,variant:"ghost",type:"button",class:"font-medium text-base text-gray-800"},{default:t(()=>{var c;return[i(q((c=s.$page.props.auth.user)==null?void 0:c.name),1)]}),_:1})):(p(),x(d,{key:1,variant:"ghost",type:"button",class:"font-medium text-base text-gray-800"},{default:t(()=>[i(" Гость ")]),_:1}))]),_:1}),e(y,{align:"end",class:"w-56"},{default:t(()=>[s.$page.props.auth.user?(p(),x(v,{key:0,class:"mt-3 space-y-1"},{default:t(()=>[e(f,{as:n(k),href:s.route("profile.edit")},{default:t(()=>[i(" 👤 Профиль ")]),_:1},8,["as","href"]),e(f,{onClick:m[0]||(m[0]=c=>n(a).post(s.route("logout")))},{default:t(()=>[i(" 🔓 Выйти ")]),_:1})]),_:1})):(p(),x(v,{key:1},{default:t(()=>[e(f,{as:n(k),href:s.route("login")},{default:t(()=>[i(" 🔑 Войти ")]),_:1},8,["as","href"]),e(f,{as:n(k),href:s.route("register")},{default:t(()=>[i(" 🪪 Регистрация ")]),_:1},8,["as","href"])]),_:1}))]),_:1})]),_:1})])]),l("div",ae,[l("button",{onClick:m[1]||(m[1]=c=>u.value=!u.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 focus:text-gray-500 transition duration-150 ease-in-out"},[(p(),h("svg",ie,[l("path",{class:C({hidden:u.value,"inline-flex":!u.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,2),l("path",{class:C({hidden:!u.value,"inline-flex":u.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,2)]))])])])]),l("div",{class:C([{block:u.value,hidden:!u.value},"sm:hidden"])},[re,l("div",de,[e(v,{class:"mt-3 space-y-1"},{default:t(()=>[s.$page.props.auth.user?(p(),h(j,{key:0},[e(B,null,{default:t(()=>[e(d,null,{default:t(()=>[i(" 🪶 Создать пост ")]),_:1})]),_:1}),e(d,{as:n(k),href:s.route("profile.edit")},{default:t(()=>[i(" 👤 Профиль ")]),_:1},8,["as","href"]),e(d,{onClick:m[2]||(m[2]=c=>n(a).post(s.route("logout")))},{default:t(()=>[i(" 🔓 Выйти ")]),_:1})],64)):(p(),h(j,{key:1},[e(d,{as:n(k),href:s.route("login")},{default:t(()=>[i(" 🔑 Войти ")]),_:1},8,["as","href"]),e(d,{as:n(k),href:s.route("register")},{default:t(()=>[i(" 🪪 Регистрация ")]),_:1},8,["as","href"])],64))]),_:1})])],2)]),s.$slots.header?(p(),h("header",ue,[l("div",pe,[L(s.$slots,"header")])])):M("",!0),l("main",null,[L(s.$slots,"default")])])])}}});export{fe as _};
