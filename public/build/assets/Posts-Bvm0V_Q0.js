import{d as h,r as _,o as l,c as p,a as v,n as k,g as w,m as $,b as g,w as T,e as V,F as B,u as i,f as P,h as j,i as x,j as d,k as f,l as b,t as A,p as N,q as R,s as q,v as D,x as E,y as L,z as M,A as z,B as F,_ as I}from"./app-gOVse4OC.js";import{P as C,_ as S,a as O}from"./InputLabel-vH0_8Vph.js";import"./_plugin-vue_export-helper-x3n3nnut.js";const U=h({inheritAttrs:!1,__name:"XDialog",setup(y,{expose:m}){const n=_(!1),s=(e=!i(n))=>n.value=e;function r(){s(!0),P(()=>{var e,t;(t=(e=i(c))==null?void 0:e.showModal)==null||t.call(e)})}function a(){var e,t;(t=(e=i(c))==null?void 0:e.close)==null||t.call(e),P(()=>{s(!1)})}const c=_();return m({open:r,close:a,toggle:s}),(e,t)=>(l(),p(B,null,[v(e.$slots,"project",k(w({open:r,close:a,toggle:s}))),n.value?(l(),p("dialog",$({key:0,ref_key:"dialog",ref:c},e.$attrs,{onClick:t[1]||(t[1]=o=>a())}),[g("div",{onClick:t[0]||(t[0]=T(()=>{},["stop"]))},[v(e.$slots,"default",k(w({open:r,close:a,toggle:s})))])],16)):V("",!0)],64))}}),G=["type"],X={__name:"SecondaryButton",props:{type:{type:String,default:"button"}},setup(y){return(m,n)=>(l(),p("button",{type:y.type,class:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-lime-500 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150"},[v(m.$slots,"default")],8,G))}},H={class:"mt-4"},J={class:"inline-flex mt-8 items-center gap-x-2"},K=h({inheritAttrs:!1,__name:"CreatePost",emits:["create"],setup(y,{emit:m}){const n=_(""),s=_(""),r=m,a=j(()=>i(n).length>0&&i(s).length>0);async function c(e){e.submitter.value==="save"&&fetch(await N("/api/v1/posts/create",{method:"POST",body:{title:i(n),content:i(s)}})).then(o=>o.json()).then(o=>{r("create",o)}),n.value="",s.value=""}return(e,t)=>(l(),x(i(U),{class:"invisible opacity-0 transition-all open:visible open:opacity-100 rounded-md"},{project:d(({open:o})=>[f(C,$(e.$attrs,{class:"text-center",onClick:u=>o()}),{default:d(()=>[b(" Создать Пост ")]),_:2},1040,["onClick"])]),default:d(()=>[g("form",{method:"dialog",name:"createPost",onSubmit:c,class:"max-w-full md:w-[560px] min-w-0 xl:min-w-96 px-5 py-4"},[f(S,null,{default:d(()=>[b(" Заголовок статьи ")]),_:1}),f(O,{name:"title",modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=o=>n.value=o)},null,8,["modelValue"]),g("fieldset",H,[f(S,null,{default:d(()=>[b(" Содержимое ")]),_:1}),g("p",{onInput:t[1]||(t[1]=o=>s.value=o.target.innerText),contenteditable:"true",class:"mt-2 border-2 border-transparent py-2 px-3 rounded-xl duration-[.25s] text-[13.3px] transition-all outline-none focus:placeholder:opacity-0 placeholder:transition-all focus:border-b-lime-600 text-[rgb(44,62,80)] focus:bg-[rgb(240,243,244)] bg-[rgb(241,244,245)] min-h-16",role:"textbox"},A(s.value),33)]),g("fieldset",J,[f(C,{disabled:!a.value,value:"save",type:"submit"},{default:d(()=>[b(" сохранить ")]),_:1},8,["disabled"]),f(X,{value:"cancel",type:"submit"},{default:d(()=>[b(" отменить ")]),_:1})])],32)]),_:1}))}}),Q={key:1},W={key:2},te=h({__name:"Posts",props:{modelValue:{}},emits:["update:modelValue"],setup(y,{emit:m}){const n=F(()=>I(()=>import("./SinglePost-oH0_f5di.js"),__vite__mapDeps([0,1,2]))),s=_(),r=_(!0);async function a(t=0,o=10){return r.value=!0,fetch(await M("/api/v1/posts")).then(u=>u.json()).then(u=>s.value=u).finally(()=>r.value=!1)}R(a);const c=q.subscribe(()=>a()),e=D.subscribe(()=>a());return E(()=>{c.unsubscribe(),e.unsubscribe()}),(t,o)=>(l(),p("section",null,[i(z)?(l(),x(K,{key:0,onCreate:o[0]||(o[0]=u=>s.value.unshift(u)),class:"w-full my-4"})):V("",!0),r.value?(l(),p("p",Q," Загрузка... ")):(l(),p("section",W,[(l(!0),p(B,null,L(s.value,u=>(l(),x(i(n),$({key:u.id},u),null,16))),128))]))]))}});export{te as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/SinglePost-oH0_f5di.js","assets/app-gOVse4OC.js","assets/app-IzNQPZo7.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
