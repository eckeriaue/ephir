import{d as x,r as d,h as _,u as c,o,c as n,b as s,t as a,e as u,l as p,k as w,j as v,N as C,p as N}from"./app-jRpZwn6i.js";import{_ as S}from"./Posts-6aq2WKLq.js";import"./InputLabel-LZ1g6OXX.js";import"./_plugin-vue_export-helper-x3n3nnut.js";const T={class:"text-gray-700 mb-7 bg-white rounded-md p-6 border-b-2 border-gray-200"},L={class:"flex justify-between lg:items-center pb-6 flex-col lg:flex-row"},j={class:"font-medium text-xl"},B=["datetime"],D=["innerHTML"],V={class:"flex justify-between"},M={key:0,class:"text-gray-500 text-xs inline-block"},A=["textContent"],E={class:"flex items-center gap-x-2"},H=["disabled"],q=x({__name:"SinglePost",props:{id:{default:NaN},title:{default:""},likes_count:{},my_like:{},user:{default:()=>({})},comments:{default:()=>[]},content:{default:""},created_at:{}},setup(h){const t=h,b=new Intl.DateTimeFormat("ru-RU",{dateStyle:"medium",timeZone:"Europe/Moscow"}),r=d(!1),m=d(t.likes_count),i=d(t.my_like),l=_(()=>c(i)&&"id"in c(i));async function g(){r.value=!0,await fetch(await N(`/api/v1/posts/${t.id}/like`,{method:"POST"})).then(e=>e.json()).then(e=>{m.value=e.likes,i.value=e.my_like}).finally(()=>r.value=!1)}const y=_(()=>t.created_at?b.format(new Date(t.created_at)):""),k=new Date(t.created_at).toISOString();return(e,I)=>(o(),n("article",T,[s("header",L,[s("h1",j,a(e.title),1),t.created_at?(o(),n("time",{key:0,class:"text-gray-500 text-xs",datetime:c(k)},a(y.value),9,B)):u("",!0)]),e.content?(o(),n("p",{key:0,class:"break-words",innerHTML:e.content},null,8,D)):u("",!0),s("footer",V,[e.user&&"name"in e.user?(o(),n("address",M,[p(" Автор: "),s("a",{rel:"author",href:"#",textContent:a(e.user.name)},null,8,A)])):u("",!0),s("fieldset",E,[w(S,null,{default:v(()=>{var f;return[p("💬 "+a((f=t.comments)==null?void 0:f.length),1)]}),_:1}),s("button",{type:"button",disabled:r.value,class:C([{"bg-red-600 border-transparent  text-white   hover:bg-red-500 active:bg-red-700  focus:ring-2 focus:ring-red-500":l.value,"bg-white border-gray-300 text-gray-700 shadow-sm hover:bg-gray-50 focus:ring-2 focus:ring-lime-500":!l.value},"px-4 py-2 disabled:pointer-events-none border inline-flex items-center tracking-widest uppercase focus:outline-none rounded-md disabled:opacity-25 font-semibold text-xs focus:ring-offset-2 transition ease-in-out duration-150"]),onClick:g},a(l.value?"🤍":"❤️")+" "+a(m.value),11,H)])])]))}});export{q as default};
