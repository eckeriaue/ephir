import{d as $,r,p as D,o,c as i,b as e,B as C,k as _,j as v,F as B,l as w,t as s,u as y,e as p,q as L,G as M,w as N,H as A,I as F,h as S,i as P,T as j}from"./app-wOSmkzKC.js";import{_ as I}from"./Posts-JWGe2kfi.js";import{a as E}from"./InputLabel-odPwA9hb.js";import{_ as T}from"./_plugin-vue_export-helper-x3n3nnut.js";import"./auth-_i2ffA1P.js";const H=d=>(A("data-v-017a3755"),d=d(),F(),d),U={class:"min-h-0"},G=H(()=>e("h2",{class:"text-xs font-medium px-6 pb-2 uppercase"}," КОММЕНТАРИИ ",-1)),O={class:"text-gray-500 text-xs inline-block"},R=["textContent"],Z={class:"text-sm text-gray-800"},q=["datetime"],z=["inert"],J=$({__name:"PostComments",props:{postId:{}},emits:["create"],setup(d,{emit:a}){const u=r(!0),c=r(),l=r("");async function k(){u.value=!0,await m(),l.value=""}const f=new Intl.DateTimeFormat("ru-RU",{dateStyle:"long",timeStyle:"short",timeZone:"Europe/Moscow"}),m=async()=>{};return D(m),(g,h)=>(o(),i("section",null,[e("div",U,[G,e("div",{class:C(["grid duration-500 transition-all",{"grid-rows-[0fr]":!c.value,"grid-rows-[1fr]":Array.isArray(c.value)}])},[_(M,{name:"list",tag:"ol",class:"space-y-4 px-6 min-h-0"},{default:v(()=>[(o(!0),i(B,null,L(c.value,t=>{var x;return o(),i("li",{key:t.id},[e("address",O,[w(" Автор: "),e("a",{role:"author",href:"#",textContent:s((x=t.user)==null?void 0:x.name)},null,8,R)]),e("p",Z,s(t.content),1),t.created_at?(o(),i("time",{key:0,datetime:new Date(t.created_at).toISOString(),class:"text-gray-500 text-[10px]"},s(y(f).format(new Date(t.created_at))),9,q)):p("",!0)])}),128))]),_:1})],2),e("form",{inert:u.value,class:C([{"opacity-50":u.value},"sticky bottom-0 flex items-center group w-full mt-6"]),action:"post",onSubmit:N(k,["prevent"])},[_(E,{modelValue:l.value,"onUpdate:modelValue":h[0]||(h[0]=t=>l.value=t),class:"h-[36px] grow rounded-t-none rounded-r-none",placeholder:"Напишите свой комментарий"},null,8,["modelValue"]),_(I,{class:"h-[36px] group-focus-within:border-b-lime-600 border-b-2 rounded-l-none"},{default:v(()=>[w("📨")]),_:1})],42,z)])]))}}),K=T(J,[["__scopeId","data-v-017a3755"]]),Q=["data-id"],W={class:"flex justify-between lg:items-center pb-6 flex-col lg:flex-row"},X={class:"font-medium text-xl"},Y=["datetime"],ee=["innerHTML"],te={class:"flex justify-between"},se={key:0,class:"text-gray-500 text-xs inline-block"},oe=["textContent"],ae={class:"flex items-center gap-x-2"},ne=["disabled"],re=$({__name:"SinglePost",props:{id:{default:NaN},title:{default:""},likes_count:{},my_like:{},user:{default:()=>({})},comments_count:{},content:{default:""},created_at:{}},setup(d){const a=d,u=new Intl.DateTimeFormat("ru-RU",{dateStyle:"medium",timeZone:"Europe/Moscow"}),c=r(!1),l=r(!1),k=r(a.likes_count),f=r(a.my_like),m=r(a.comments_count),g=S(()=>y(f)&&"id"in y(f));async function h(){c.value=!0}const t=S(()=>a.created_at?u.format(new Date(a.created_at)):""),x=new Date(a.created_at).toISOString();return(n,b)=>(o(),i("article",{"data-id":n.$props.id,class:"text-gray-700 mb-7 bg-white rounded-xl p-6 border-b-2 border-gray-200"},[e("header",W,[e("h1",X,s(n.title),1),a.created_at?(o(),i("time",{key:0,class:"text-gray-500 text-xs",datetime:y(x)},s(t.value),9,Y)):p("",!0)]),n.content?(o(),i("p",{key:0,class:"break-words mb-8",innerHTML:n.content},null,8,ee)):p("",!0),e("footer",te,[n.user&&"name"in n.user?(o(),i("address",se,[w(" Автор: "),e("a",{rel:"author",href:"#",textContent:s(n.user.name)},null,8,oe)])):p("",!0),e("fieldset",ae,[_(I,{onClick:b[0]||(b[0]=V=>l.value=!l.value)},{default:v(()=>[w(" 💬 "+s(m.value),1)]),_:1}),e("button",{type:"button",disabled:c.value,class:C([{"bg-red-600 border-transparent  text-white   hover:bg-red-500 active:bg-red-700  focus:ring-2 focus:ring-red-500":g.value,"bg-white border-gray-300 text-gray-700 shadow-sm hover:bg-gray-50 focus:ring-2 focus:ring-lime-500":!g.value},"px-4 py-2 disabled:pointer-events-none border inline-flex items-center tracking-widest uppercase focus:outline-none rounded-md disabled:opacity-25 font-semibold text-xs focus:ring-offset-2 transition ease-in-out duration-150"]),onClick:h},s(g.value?"🤍":"❤️")+" "+s(k.value),11,ne)])]),_(j,null,{default:v(()=>[l.value?(o(),P(K,{key:0,onCreate:b[1]||(b[1]=V=>m.value+=1),"post-id":n.$props.id,class:"transition-all duration-500 overflow-hidden mt-6 -mx-6 -mb-6"},null,8,["post-id"])):p("",!0)]),_:1})],8,Q))}}),me=T(re,[["__scopeId","data-v-37987d04"]]);export{me as default};
