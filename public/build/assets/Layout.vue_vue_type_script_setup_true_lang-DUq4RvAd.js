import{A as z}from"./ApplicationLogo-DdS-q-97.js";import{d as j,i as F,j as b,u as n,r,o as p,c as h,b as l,a as e,w as t,f as i,A as E,T as P,q as w,g as V,h as L,F as U,y as I,e as q,x as A,n as M,p as k,t as H}from"./app-MePG7f-y.js";const O={class:"mt-2"},D={class:"mb-1"},K=j({__name:"MarkdownEditor",props:{modelValue:{default:""},modelModifiers:{}},emits:["update:modelValue"],setup(C){const[d]=F(C,"modelValue"),a=b(),s={href:b(""),mask:b(""),isVisible:b(!1),insert(){const u=n(this.mask)||n(this.href),o=n(this.href);!d||!o||(this.mask.value="",this.href.value="",this.isVisible.value=!1,a.value.appendChild(Object.assign(document.createElement("a"),{classList:"editor-link",textContent:u,target:"_blank",href:o})),d.value=n(a).innerHTML,f())}};function f(){a.value.appendChild(document.createTextNode(" "))}return(u,o)=>{const _=r("kit-button"),v=r("kit-dropdown-trigger"),y=r("kit-input"),x=r("kit-command"),c=r("kit-dropdown-content"),$=r("kit-dropdown-menu");return p(),h("div",O,[l("div",D,[e($,{open:s.isVisible.value,"onUpdate:open":o[4]||(o[4]=m=>s.isVisible.value=m)},{default:t(()=>[e(v,{"as-child":""},{default:t(()=>[e(_,{type:"button",variant:"outline"},{default:t(()=>[i("🔗")]),_:1})]),_:1}),e(c,null,{default:t(()=>[e(x,{as:"fieldset",tabindex:"-1",onKeypress:o[2]||(o[2]=E(m=>s.insert(),["enter"])),onFocusout:o[3]||(o[3]=m=>s.insert()),class:"space-y-1 p-1"},{default:t(()=>[e(y,{placeholder:"Текст",modelValue:s.mask.value,"onUpdate:modelValue":o[0]||(o[0]=m=>s.mask.value=m)},null,8,["modelValue"]),e(y,{required:"",placeholder:"https://example.com",modelValue:s.href.value,"onUpdate:modelValue":o[1]||(o[1]=m=>s.href.value=m)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["open"])]),l("div",{class:"min-h-20 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",id:"postContent",ref_key:"content",ref:a,onInput:o[5]||(o[5]=m=>d.value=m.target.innerHTML),contenteditable:"plaintext-only"},null,544)])}}}),R={class:"mt-4 max-w-full"},G={key:0,class:"w-full mt-6"},J={class:"grid grid-cols-4 gap-4 min-h-40"},Q={class:"gap-x-2 flex justify-end mt-4"},B=j({__name:"CreatePostModal",setup(C){const d=b(!1),a=P({title:"",content:"",photos:[]}),s=b([]);function f(u){const o=u.target;o&&o instanceof HTMLInputElement&&o.files&&0 in o.files&&(a.photos.push(o.files[0]),s.value.push(URL.createObjectURL(o.files[0])))}return(u,o)=>{var N;const _=r("kit-button"),v=r("kit-dialog-trigger"),y=r("kit-dialog-title"),x=r("kit-dialog-description"),c=r("kit-label"),$=r("kit-input"),m=r("kit-dialog-content"),S=r("kit-dialog");return(N=u.$page.props.auth)!=null&&N.user?(p(),w(S,{key:0,open:d.value,"onUpdate:open":o[4]||(o[4]=g=>d.value=g)},{default:t(()=>[e(v,{"as-child":""},{default:t(()=>[L(u.$slots,"default",{},()=>[e(_,null,{default:t(()=>[i(" 🪶 ")]),_:1})])]),_:3}),e(m,{class:"overflow-y-scroll max-h-[calc(100dvh_-_64px)]"},{default:t(()=>[e(y,null,{default:t(()=>[i(" Создать пост ")]),_:1}),e(x,null,{default:t(()=>[i("Здесь вы можете написать о чем вы думаете ")]),_:1}),l("form",{class:"min-w-fit",onSubmit:o[3]||(o[3]=q(g=>(n(a).post(u.route("posts.create"),{onSuccess(){n(a).reset("content"),n(a).reset("photos"),n(a).reset("title")}}),d.value=!1),["prevent"]))},[e(c,{for:"postName"},{default:t(()=>[i(" Название ")]),_:1}),e($,{modelValue:n(a).title,"onUpdate:modelValue":o[0]||(o[0]=g=>n(a).title=g),id:"postName",class:"mt-2"},null,8,["modelValue"]),l("div",R,[e(c,{for:"postContent"},{default:t(()=>[i(" Содержимое ")]),_:1}),e(K,{modelValue:n(a).content,"onUpdate:modelValue":o[1]||(o[1]=g=>n(a).content=g)},null,8,["modelValue"]),e(c,{for:"picture",class:"mt-2 inline-block"},{default:t(()=>[i(" Добавить фото ")]),_:1}),e($,{id:"picture",onChange:f,type:"file"}),s.value.length>0?(p(),h("div",G,[l("div",J,[(p(!0),h(U,null,I(s.value,(g,T)=>(p(),h("div",{key:g+T,style:A({backgroundImage:`url('${g}')`}),class:"bg-cover w-full rounded aspect-square"},null,4))),128))])])):V("",!0)]),l("div",Q,[e(_,{type:"button",onClick:o[2]||(o[2]=g=>(d.value=!1,n(a).title="",n(a).content="")),variant:"secondary"},{default:t(()=>[i("Отменить")]),_:1}),e(_,{type:"submit",disabled:n(a).title.length<1||n(a).content.length<1||n(a).processing},{default:t(()=>[i("Сохранить")]),_:1},8,["disabled"])])],32)]),_:1})]),_:3},8,["open"])):V("",!0)}}}),W={class:"min-h-screen bg-gray-100"},X={class:"bg-white border-b border-gray-100 sticky z-10 top-0"},Y={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Z={class:"flex justify-between h-16"},ee={class:"flex"},te={class:"flex items-center gap-x-4"},oe=l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-4 group-hover:rotate-180 transition-transform duration-300"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})],-1),se=l("div",{class:"hidden space-x-8 sm:-my-px sm:ms-10 sm:flex"},null,-1),ne={class:"hidden sm:flex sm:items-center sm:ms-6"},le={class:"ms-3 relative"},ae={class:"-me-2 flex items-center sm:hidden"},ie={class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},re=l("div",{class:"pt-2 pb-3 space-y-1"},null,-1),de={class:"pt-4 pb-1 border-t border-gray-200"},ue={key:0,class:"bg-white sticky inset-0 shadow"},pe={class:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},fe=j({__name:"Layout",props:{canUpdatePosts:{type:Boolean,default:!1}},setup(C){const d=b(!1),a=P({});return(s,f)=>{const u=r("kit-button"),o=r("kit-dropdown-trigger"),_=r("kit-dropdown-menu-item"),v=r("kit-command"),y=r("kit-dropdown-content"),x=r("kit-dropdown-menu");return p(),h("div",null,[l("div",W,[l("nav",X,[l("div",Y,[l("div",Z,[l("div",ee,[l("div",te,[e(n(k),{href:s.route("posts")},{default:t(()=>[e(z,{class:"block h-9 w-auto fill-current text-gray-800"})]),_:1},8,["href"]),s.$props.canUpdatePosts?(p(),w(u,{key:0,as:n(k),href:s.route("posts"),variant:"secondary",class:"size-6 px-0 group"},{default:t(()=>[oe]),_:1},8,["as","href"])):V("",!0)]),se]),l("div",ne,[l("div",le,[e(B),e(x,null,{default:t(()=>[e(o,null,{default:t(()=>[s.$page.props.auth.user?(p(),w(u,{key:0,variant:"ghost",type:"button",class:"font-medium text-base text-gray-800"},{default:t(()=>{var c;return[i(H((c=s.$page.props.auth.user)==null?void 0:c.name),1)]}),_:1})):(p(),w(u,{key:1,variant:"ghost",type:"button",class:"font-medium text-base text-gray-800"},{default:t(()=>[i(" Гость ")]),_:1}))]),_:1}),e(y,{align:"end",class:"w-56"},{default:t(()=>[s.$page.props.auth.user?(p(),w(v,{key:0,class:"mt-3 space-y-1"},{default:t(()=>[e(_,{as:n(k),href:s.route("profile.edit")},{default:t(()=>[i(" 👤 Профиль ")]),_:1},8,["as","href"]),e(_,{onClick:f[0]||(f[0]=c=>n(a).post(s.route("logout")))},{default:t(()=>[i(" 🔓 Выйти ")]),_:1})]),_:1})):(p(),w(v,{key:1},{default:t(()=>[e(_,{as:n(k),href:s.route("login")},{default:t(()=>[i(" 🔑 Войти ")]),_:1},8,["as","href"]),e(_,{as:n(k),href:s.route("register")},{default:t(()=>[i(" 🪪 Регистрация ")]),_:1},8,["as","href"])]),_:1}))]),_:1})]),_:1})])]),l("div",ae,[l("button",{onClick:f[1]||(f[1]=c=>d.value=!d.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 focus:text-gray-500 transition duration-150 ease-in-out"},[(p(),h("svg",ie,[l("path",{class:M({hidden:d.value,"inline-flex":!d.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,2),l("path",{class:M({hidden:!d.value,"inline-flex":d.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,2)]))])])])]),l("div",{class:M([{block:d.value,hidden:!d.value},"sm:hidden"])},[re,l("div",de,[e(v,{class:"mt-3 space-y-1"},{default:t(()=>[s.$page.props.auth.user?(p(),h(U,{key:0},[e(B,null,{default:t(()=>[e(u,null,{default:t(()=>[i(" 🪶 Создать пост ")]),_:1})]),_:1}),e(u,{as:n(k),href:s.route("profile.edit")},{default:t(()=>[i(" 👤 Профиль ")]),_:1},8,["as","href"]),e(u,{onClick:f[2]||(f[2]=c=>n(a).post(s.route("logout")))},{default:t(()=>[i(" 🔓 Выйти ")]),_:1})],64)):(p(),h(U,{key:1},[e(u,{as:n(k),href:s.route("login")},{default:t(()=>[i(" 🔑 Войти ")]),_:1},8,["as","href"]),e(u,{as:n(k),href:s.route("register")},{default:t(()=>[i(" 🪪 Регистрация ")]),_:1},8,["as","href"])],64))]),_:1})])],2)]),s.$slots.header?(p(),h("header",ue,[l("div",pe,[L(s.$slots,"header")])])):V("",!0),l("main",null,[L(s.$slots,"default")])])])}}});export{fe as _};
