import{h as x,G as w,H as y,o as m,c as p,I as V,O as C,J as v,K as S,L as $,d as B,S as E,M as h,x as N,t as j,e as L,b as i,k as c,j as O,N as U,w as F,F as M,D as P,s as q,l as D,u as I}from"./app--wF05yL8.js";import{_ as T}from"./_plugin-vue_export-helper-x3n3nnut.js";import{a as _,P as A,_ as k}from"./InputLabel-Drto_xAl.js";const J=["value"],R={__name:"Checkbox",props:{checked:{type:[Array,Boolean],required:!0},value:{default:null}},emits:["update:checked"],setup(l,{emit:r}){const s=r,n=l,o=x({get(){return n.checked},set(a){s("update:checked",a)}});return(a,e)=>w((m(),p("input",{type:"checkbox",value:l.value,"onUpdate:modelValue":e[0]||(e[0]=t=>o.value=t),class:"rounded-md appearance-none w-4 h-4 border-2 border-gray-600 outline outline-transparent transition-all focus:outline-offset-2 checked:border-transparent focus:outline-lime-600 checked:bg-lime-600"},null,8,J)),[[y,o.value]])}},z=T(R,[["__scopeId","data-v-6c7a7bf9"]]);function G(l,r){r===void 0&&(r={});var s=r.selector,n=V(r,["selector"]);return new C(function(o){var a=new AbortController,e=a.signal,t=!0,d=n.signal;if(d)if(d.aborted)a.abort();else{var f=function(){e.aborted||a.abort()};d.addEventListener("abort",f),o.add(function(){return d.removeEventListener("abort",f)})}var g=v(v({},n),{signal:e}),b=function(u){t=!1,o.error(u)};return fetch(l,g).then(function(u){s?S(s(u)).subscribe($(o,void 0,function(){t=!1,o.complete()},b)):(t=!1,o.next(u),o.complete())}).catch(b),function(){t&&a.abort()}})}const K={key:0,class:"mb-4 font-medium text-sm text-green-600"},H={class:"mt-4"},Q={class:"block mt-4"},X={class:"flex items-center"},Y=i("span",{class:"ms-2 text-sm text-gray-600"},"Запомнить меня",-1),Z={class:"flex items-center justify-end mt-4"},se=B({__name:"Login",props:{canResetPassword:{type:Boolean},status:{type:String}},setup(l){const r=P(),s={email:"",password:"",remember:!1,processing:!1},n=new E,o=n.pipe(h(({email:a,password:e})=>G("/api/v1/login",{selector:t=>t.json(),method:"POST",body:JSON.stringify({email:a,password:e}),headers:{"Content-Type":"application/json"}})),h(async a=>(await r.push("/"),q.next(a.token),of(a.token)))).subscribe();return N(()=>{n.complete(),o.unsubscribe()}),(a,e)=>(m(),p(M,null,[l.status?(m(),p("div",K,j(l.status),1)):L("",!0),i("form",{onSubmit:e[3]||(e[3]=F(t=>I(n).next(s),["prevent"]))},[i("div",null,[c(k,{for:"email",value:"Email"}),c(_,{id:"email",type:"email",class:"mt-1 block w-full",modelValue:s.email,"onUpdate:modelValue":e[0]||(e[0]=t=>s.email=t),placeholder:"Email",required:"",autofocus:"",autocomplete:"username"},null,8,["modelValue"])]),i("div",H,[c(k,{for:"password",value:"Пароль"}),c(_,{id:"password",type:"password",class:"mt-1 block w-full",placeholder:"Пароль",modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=t=>s.password=t),required:"",autocomplete:"current-password"},null,8,["modelValue"])]),i("div",Q,[i("label",X,[c(z,{name:"remember",checked:s.remember,"onUpdate:checked":e[2]||(e[2]=t=>s.remember=t)},null,8,["checked"]),Y])]),i("div",Z,[c(A,{class:U(["ms-4",{"opacity-25":s.processing}]),disabled:s.processing},{default:O(()=>[D(" Войти ")]),_:1},8,["class","disabled"])])],32)],64))}});export{se as default};
